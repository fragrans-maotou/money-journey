import{d as e,r as a,c as l,e as t,f as n,i as o,y as r,I as u,J as s,t as i,n as d}from"./vue-vendor-GQR5GLLq.js";import{_ as c}from"./index-DLCvt2vX.js";const p={class:"amount-input"},m={class:"amount-input__container"},v=["placeholder","disabled","readonly"],y={key:0,class:"amount-input__clear"},h={key:0,class:"amount-input__message"},f={key:0,class:"amount-input__error"},_={key:1,class:"amount-input__hint"},w=c(e({__name:"AmountInput",props:{modelValue:{},placeholder:{default:"0.00"},error:{},hint:{},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},showClear:{type:Boolean,default:!0},min:{default:0},max:{default:999999.99},precision:{default:2}},emits:["update:modelValue","focus","blur","input","clear"],setup(e,{expose:c,emit:w}){const k=e,b=w,x=a(),g=a(!1),V=l({get:()=>void 0===k.modelValue||null===k.modelValue?"":M(k.modelValue),set:e=>{const a=A(e);null!==a&&(b("update:modelValue",a),b("input",a))}}),M=e=>0===e?"":e.toFixed(k.precision).replace(/\.?0+$/,""),A=e=>{const a=e.replace(/[^\d.]/g,"");if(a.split(".").length>2)return null;const l=parseFloat(a);if(isNaN(l))return null;const t=Math.max(k.min,Math.min(k.max,l));return Math.round(t*Math.pow(10,k.precision))/Math.pow(10,k.precision)},B=e=>{g.value=!0,b("focus",e)},C=e=>{if(g.value=!1,b("blur",e),V.value){const e=A(V.value);null!==e&&(V.value=M(e))}},I=e=>{const a=e.target.value,l=A(a);null!==l&&b("input",l)},K=e=>{const a=/^[0-9]$/.test(e.key),l="."===e.key&&!V.value.includes("."),t=["Backspace","Delete","Tab","Escape","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e.key),n=e.ctrlKey||e.metaKey||e.altKey;a||l||t||n||e.preventDefault()},D=()=>{return e=null,a=null,l=function*(){var e;V.value="",b("update:modelValue",0),b("clear"),yield d(),null==(e=x.value)||e.focus()},new Promise((t,n)=>{var o=e=>{try{u(l.next(e))}catch(a){n(a)}},r=e=>{try{u(l.throw(e))}catch(a){n(a)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,r);u((l=l.apply(e,a)).next())});var e,a,l};return c({focus:()=>{var e;return null==(e=x.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=x.value)?void 0:e.blur()},clear:D}),(e,a)=>(n(),t("div",p,[o("div",m,[a[2]||(a[2]=o("div",{class:"amount-input__currency"},"Â¥",-1)),u(o("input",{ref_key:"inputRef",ref:x,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),class:"amount-input__input",type:"text",inputmode:"decimal",placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,onFocus:B,onBlur:C,onInput:I,onKeydown:K},null,40,v),[[s,V.value]]),e.showClear&&V.value&&!e.disabled&&!e.readonly?(n(),t("div",y,[o("button",{class:"amount-input__clear-btn",onClick:D},[...a[1]||(a[1]=[o("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[o("circle",{cx:"10",cy:"10",r:"10",fill:"currentColor",opacity:"0.3"}),o("path",{d:"M7 7L13 13M13 7L7 13",stroke:"white","stroke-width":"1.5","stroke-linecap":"round"})],-1)])])])):r("",!0)]),e.error||e.hint?(n(),t("div",h,[e.error?(n(),t("span",f,i(e.error),1)):e.hint?(n(),t("span",_,i(e.hint),1)):r("",!0)])):r("",!0)]))}}),[["__scopeId","data-v-6f9d6772"]]);export{w as A};
